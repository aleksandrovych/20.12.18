{"ast":null,"code":"import _classCallCheck from \"/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/src/PopularFilms.js\";\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { getPopularMovies } from './actions/movies';\nimport ImageMeasurer from \"./MasonryProvider\";\nimport PaginationControlled from \"./ControledPagination\";\nimport { Grid } from \"semantic-ui-react/dist/commonjs/collections/Grid\";\nimport { withRouter } from 'react-router-dom';\nimport ReactResizeDetector from 'react-resize-detector';\n\nvar PopularFilms =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PopularFilms, _Component);\n\n  function PopularFilms(props) {\n    var _this;\n\n    _classCallCheck(this, PopularFilms);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PopularFilms).call(this, props));\n\n    _this.onPageChange = function (event) {\n      try {\n        var page = event.target.getAttribute('value');\n        var _getPopularMovies = _this.props.getPopularMovies;\n\n        _getPopularMovies(page);\n      } catch (_unused) {}\n    };\n\n    _this.calculateLayout = function (width) {\n      _this.setState({\n        width: width\n      });\n    };\n\n    _this.componentRef = React.createRef();\n    _this.state = {\n      width: 0\n    };\n    return _this;\n  }\n\n  _createClass(PopularFilms, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          getPopularMovies = _this$props.getPopularMovies,\n          activePagePopular = _this$props.activePagePopular;\n      getPopularMovies(activePagePopular);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          moviesAreLoading = _this$props2.moviesAreLoading,\n          movies = _this$props2.movies,\n          totalMovies = _this$props2.totalMovies,\n          activePagePopular = _this$props2.activePagePopular;\n\n      var reducer = function reducer(a, b) {\n        return a.concat(b);\n      };\n\n      var parsed = movies.reduce(reducer, []);\n      var pagination = {\n        activePage: activePagePopular,\n        onPageChange: this.onPageChange,\n        totalPages: Math.floor(totalMovies / 20)\n      };\n      return [React.createElement(ReactResizeDetector, {\n        handleWidth: true,\n        onResize: this.calculateLayout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(ImageMeasurer, {\n        width: this.state.width,\n        key: \"ImageMeasurerPopular\",\n        list: parsed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      })), React.createElement(PaginationControlled, Object.assign({\n        key: \"PaginationControlledPopular\"\n      }, pagination, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }))];\n    }\n  }]);\n\n  return PopularFilms;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    movies: state.movies.movies,\n    moviesAreLoading: state.movies.moviesAreLoading,\n    totalMovies: state.movies.totalMovies,\n    activePagePopular: state.movies.activePagePopular\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getPopularMovies: getPopularMovies\n  }, dispatch);\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PopularFilms));","map":{"version":3,"sources":["/Users/allar-alexeyalexandrovich/20.12.18/moveirstore/src/PopularFilms.js"],"names":["_","React","Component","bindActionCreators","connect","getPopularMovies","ImageMeasurer","PaginationControlled","Grid","withRouter","ReactResizeDetector","PopularFilms","props","onPageChange","event","page","target","getAttribute","calculateLayout","width","setState","componentRef","createRef","state","activePagePopular","moviesAreLoading","movies","totalMovies","reducer","a","b","concat","parsed","reduce","pagination","activePage","totalPages","Math","floor","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { getPopularMovies } from './actions/movies';\nimport ImageMeasurer from \"./MasonryProvider\";\nimport PaginationControlled from \"./ControledPagination\";\nimport {Grid} from \"semantic-ui-react/dist/commonjs/collections/Grid\";\nimport { withRouter } from 'react-router-dom'\nimport ReactResizeDetector from 'react-resize-detector';\n\nclass PopularFilms extends Component {\n\n    onPageChange = (event) => {\n\n        try {\n            let page = event.target.getAttribute('value')\n\n            let { getPopularMovies } = this.props;\n            getPopularMovies(page);\n        } catch {\n        }\n    }\n\n    constructor(props) {\n        super(props)\n\n        this.componentRef = React.createRef()\n        this.state = {width: 0}\n    }\n\n\n    componentDidMount() {\n        let { getPopularMovies, activePagePopular } = this.props\n        getPopularMovies(activePagePopular);\n    }\n\n    calculateLayout = width => {\n\n        this.setState({width: width})\n    }\n\n\n    render() {\n        let {moviesAreLoading, movies, totalMovies, activePagePopular} = this.props\n\n        const reducer = function(a, b) { return a.concat(b);}\n        const parsed = movies.reduce(reducer, []);\n        let pagination = {activePage: activePagePopular, onPageChange: this.onPageChange, totalPages: Math.floor(totalMovies / 20)}\n        return [\n            <ReactResizeDetector handleWidth onResize={this.calculateLayout}>\n                < ImageMeasurer width={this.state.width} key=\"ImageMeasurerPopular\" list={parsed} / >\n                </ReactResizeDetector>,\n            < PaginationControlled key=\"PaginationControlledPopular\" {...pagination} / >\n        ]\n    }\n}\n\n\n\nconst mapStateToProps = (state) => {\n    return {\n        movies:state.movies.movies,\n        moviesAreLoading:state.movies.moviesAreLoading,\n        totalMovies:state.movies.totalMovies,\n        activePagePopular:state.movies.activePagePopular\n    }\n}\n\nconst mapDispatchToProps = dispatch => bindActionCreators({\n    getPopularMovies\n}, dispatch)\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(PopularFilms));"]},"metadata":{},"sourceType":"module"}